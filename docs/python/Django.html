<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content=",">










<meta name="description" content="示例：1、创建一个项目：    $ django-admin startproject website 2、配置数据库 创建数据库 webdemo    DATABASES = {     &amp;apos;default&amp;apos;: {         &amp;apos;ENGINE&amp;apos;: &amp;apos;django.db.backends.mysql&amp;apos;,         &amp;apos;NA">
<meta name="keywords" content="python">
<meta property="og:type" content="website">
<meta property="og:title" content="python">
<meta property="og:url" content="http://yoursite.com/docs/python/Django.html">
<meta property="og:site_name" content="issac">
<meta property="og:description" content="示例：1、创建一个项目：    $ django-admin startproject website 2、配置数据库 创建数据库 webdemo    DATABASES = {     &amp;apos;default&amp;apos;: {         &amp;apos;ENGINE&amp;apos;: &amp;apos;django.db.backends.mysql&amp;apos;,         &amp;apos;NA">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/Django/img1.png">
<meta property="og:updated_time" content="2019-10-01T07:07:51.326Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python">
<meta name="twitter:description" content="示例：1、创建一个项目：    $ django-admin startproject website 2、配置数据库 创建数据库 webdemo    DATABASES = {     &amp;apos;default&amp;apos;: {         &amp;apos;ENGINE&amp;apos;: &amp;apos;django.db.backends.mysql&amp;apos;,         &amp;apos;NA">
<meta name="twitter:image" content="http://yoursite.com/images/Django/img1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/docs/python/Django.html">





  <title>python | issac</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e4152536907d39c2fa183d55d7f13141";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">issac</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-docs">
          <a href="/docs/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>
            
            docs
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
    
    
    <div class="post-block page">
      <header class="post-header">

	<h1 class="post-title" itemprop="name headline">python</h1>



</header>

      
      
      
      <div class="post-body">
        
        
          <h1 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h1><p>1、创建一个项目：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ django-admin startproject website</code></pre></blockquote>
<p>2、配置数据库</p>
<p>创建数据库 webdemo</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>DATABASES = {
    &apos;default&apos;: {
        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,
        &apos;NAME&apos;: &apos;webdemo&apos;,
        &apos;USER&apos;: &apos;root&apos;,
        &apos;PASSWORD&apos;: &apos;xxxxx&apos;,
        &apos;HOST&apos;: &apos;localhost&apos;,
        &apos;PORT&apos;: &apos;3306&apos;,
    }
}</code></pre></blockquote>
<p>3、验证开发服务器：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py runserver</code></pre></blockquote>
<p>你将看到命令行下输出了以下内容：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>Performing system checks...</code></pre><blockquote>
</blockquote>
<pre><code>0 errors found
May 13, 2015 - 15:50:53
Django version 1.8, using settings &apos;mysite.settings&apos;
Starting development server at http://127.0.0.1:8000/
Quit the server with CONTROL-C.</code></pre></blockquote>
<hr>
<blockquote>
</blockquote>
<p>4、创建您的应用程序： </p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py startapp polls           #创建了 polls 应用文件</code></pre></blockquote>
<p>4.1、创建两个模型： Question和Choice。</p>
<p>polls/models.py</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.db import models</code></pre></blockquote>
<blockquote>
<blockquote>
</blockquote>
<pre><code>class Question(models.Model):
    question_text = models.CharField(max_length=200)
    pub_date = models.DateTimeField(&apos;date published&apos;)</code></pre></blockquote>
<blockquote>
<blockquote>
</blockquote>
<pre><code>class Choice(models.Model):
    question = models.ForeignKey(Question)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)</code></pre></blockquote>
<p>4.2、激活应用模型</p>
<p>website/settings.py</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>INSTALLED_APPS = (
    &apos;django.contrib.admin&apos;,
    &apos;django.contrib.auth&apos;,
    &apos;django.contrib.contenttypes&apos;,
    &apos;django.contrib.sessions&apos;,
    &apos;django.contrib.messages&apos;,
    &apos;django.contrib.staticfiles&apos;,
    &apos;polls&apos;,
)</code></pre></blockquote>
<p>4.3、现在Django知道要包含polls应用。 让我们运行另外一个命令：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py makemigrations polls</code></pre></blockquote>
<p>你应该看到类似下面的内容：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>Migrations for &apos;polls&apos;:
  0001_initial.py:
    - Create model Question
    - Create model Choice
    - Add field question to choice</code></pre></blockquote>
<p>4.4、首先，让我们看一下迁移行为将会执行哪些SQL语句。</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py sqlmigrate polls 0001</code></pre></blockquote>
<img src="../../images/Django/img1.png" style="display: block;margin: auto;">

<p>4.5、现在，再次运行migrate以在你的数据库中创建模型所对应的表：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py migrate</code></pre></blockquote>
<blockquote>
</blockquote>
<p>5、创建一个管理员用户</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py createsuperuser</code></pre></blockquote>
<p>键入你想要使用的用户名，然后按下回车键等等。</p>
<p>启动开发服务器：Django的管理站点是默认启用的。 </p>
<p>让我们启动开发服务器，然后探索它。</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py runserver 127.0.0.1:13709</code></pre></blockquote>
<p>访问 <a href="http://localhost:13709/admin" target="_blank" rel="noopener">http://localhost:13709/admin</a></p>
<blockquote>
</blockquote>
<p>6、编写你的第一个视图</p>
<p>polls/views.py</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.http import HttpResponse</code></pre><blockquote>
</blockquote>
<pre><code>def index(request):
        return HttpResponse(&quot;Hello, world. You&apos;re at the polls index.&quot;)</code></pre></blockquote>
<blockquote>
</blockquote>
<p>7、为了能够调用这个视图，我们需要将这个视图映射到URL上 —— 利用一个URLconf。</p>
<p>为了在投票应用目录内部创建URLconf，需要创建一个urls.py文件。</p>
<p>新建 polls/urls.py</p>
<p>在polls/urls.py文件中键入如下代码：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.conf.urls import url</code></pre><blockquote>
</blockquote>
<pre><code>from . import views</code></pre><blockquote>
</blockquote>
<pre><code>urlpatterns = [
    url(r&apos;^$&apos;, views.index, name=&apos;index&apos;),
]</code></pre></blockquote>
<p>下一步，让主 URLconf 可以链接到 polls.urls 模块。</p>
<p>在 website/urls.py 中插入一个include()：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.conf.urls import include, url
from django.contrib import admin</code></pre><blockquote>
</blockquote>
<pre><code>urlpatterns = [
        url(r&apos;^polls/&apos;, include(&apos;polls.urls&apos;)),
        url(r&apos;^admin/&apos;, include(admin.site.urls)),
]</code></pre></blockquote>
<h1 id="一、创建一个项目："><a href="#一、创建一个项目：" class="headerlink" title="一、创建一个项目："></a>一、创建一个项目：</h1><p>在命令行（终端）中，cd（例如cd exam)到你想要用来保存代码的目录，然后运行如下命令：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ django-admin startproject mysite</code></pre></blockquote>
<p>备注：django中文编码</p>
<blockquote>
<blockquote>
</blockquote>
</blockquote>
<pre><code># coding=utf8</code></pre><p>/usr/local/lib/python2.7/dist-packages/django</p>
<p>192.168.40.144</p>
<h1 id="二、开发服务器"><a href="#二、开发服务器" class="headerlink" title="二、开发服务器"></a>二、开发服务器</h1><blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py runserver
$ python manage.py runserver 8089</code></pre></blockquote>
<p>在Windows通过debain的主机ip访问</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py runserver 10.251.121.37:8989
$ python manage.py runserver 10.251.121.37:8989
$ python manage.py runserver 10.10.8.62:8989
$ python manage.py runserver 127.0.0.1:8989</code></pre></blockquote>
<p>执行django的测试文件：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py test polls</code></pre></blockquote>
<h1 id="三、创建模型"><a href="#三、创建模型" class="headerlink" title="三、创建模型"></a>三、创建模型</h1><p>确保你在与manage.py相同的目录下，并且键入以下命令来创建你的应用： </p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py startapp polls            #创建了polls应用文件</code></pre></blockquote>
<p>1、编辑polls/models.py文件，并让它看起来像这样：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.db import models</code></pre><blockquote>
</blockquote>
<pre><code>class Question(models.Model):         #自动分配id为主键
           question_text = models.CharField(max_length=200)
        pub_date = models.DateTimeField(&apos;date published&apos;)</code></pre><blockquote>
</blockquote>
<pre><code>class Choice(models.Model):
        question = models.ForeignKey(Question)
        choice_text = models.CharField(max_length=200)
        votes = models.IntegerField(default=0)</code></pre></blockquote>
<p>2、再次编辑mysite/settings.py文件，并修改INSTALLED_APPS设置以包含字符串’polls’。</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>INSTALLED_APPS = (
    &apos;django.contrib.admin&apos;,
    &apos;django.contrib.auth&apos;,
    &apos;django.contrib.contenttypes&apos;,
    &apos;django.contrib.sessions&apos;,
    &apos;django.contrib.messages&apos;,
    &apos;django.contrib.staticfiles&apos;,
    &apos;polls&apos;,
)</code></pre></blockquote>
<p>现在Django知道要包含polls应用。 让我们运行另外一个命令：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py makemigrations polls</code></pre></blockquote>
<pre><code>#$ python manage.py makemigrations</code></pre><p>sqlmigrate命令接收迁移文件的名字并返回它们的SQL语句：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py sqlmigrate weibodata 0004</code></pre></blockquote>
<p>现在，再次运行migrate以在你的数据库中创建模型所对应的表：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py migrate</code></pre></blockquote>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py runserver</code></pre></blockquote>
<p>备注：记住实现模型变更的三个步骤：</p>
<p>1、修改你的模型（在models.py文件中）。</p>
<p>2、运行        $ python manage.py runserver</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py makemigrations   //为这些修改创建迁移文件</code></pre></blockquote>
<blockquote>
</blockquote>
<p>Ps：sqlmigrate命令接收迁移文件的名字并返回它们的SQL语句：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py sqlmigrate polls 0001</code></pre></blockquote>
<p>3、运行</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>python manage.py migrate</code></pre></blockquote>
<p>将这些改变更新到数据库中。</p>
<h1 id="四、玩转API"><a href="#四、玩转API" class="headerlink" title="四、玩转API"></a>四、玩转API</h1><p>使用如下命令来调用Python shell：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py shell</code></pre></blockquote>
<p>探索这些数据库 API：</p>
<blockquote>
<blockquote>
<blockquote>
<p>from polls.models import Question, Choice, mysitedata<br>from django.utils import timezone<br>Question.objects.all()<br>    []<br>q = Question(question_text=”What’s new?”, pub_date=timezone.now())<br>q.save()</p>
</blockquote>
</blockquote>
</blockquote>
<p>或者：Question(question_text=”这但是是”, pub_date=timezone.now()).save()</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>mysitedata(mysite_text=&quot;测试&quot;, pub_date=timezone.now(),m_name=&quot;这&quot;, m_URL=&quot;www.baidu,com&quot;, o1_type=0,t1_color=1,fir_ss1=&quot;内部系统&quot;,sec_ss2=&quot;热门&quot;).save()</code></pre></blockquote>
<h1 id="五、创建一个管理员用户"><a href="#五、创建一个管理员用户" class="headerlink" title="五、创建一个管理员用户"></a>五、创建一个管理员用户</h1><p>1、首先，我们需要创建一个能够登录管理站点的用户。 运行如下命令：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>$ python manage.py createsuperuser</code></pre></blockquote>
<p>键入你想要使用的用户名，然后按下回车键：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>Username: admin</code></pre></blockquote>
<p>然后提示你输入想要使用的邮件地址：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>Email address: admin@example.com</code></pre></blockquote>
<p>最后一步是输入你的密码。 你将被要求输入你的密码两次，第二次输入是为了确认第一次的输入。</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>Password: **********
Password (again): *********
Superuser created successfully.</code></pre></blockquote>
<p>现在，打开一个浏览器访问你本地域名中的 “/admin/” —— 例如<a href="http://127.0.0.1:8000/admin/" target="_blank" rel="noopener">http://127.0.0.1:8000/admin/</a></p>
<p>2、我们需要告诉管理站点Question 对象要有一个管理界面。 要做这件事，需要打开polls/admin.py文件，把它编辑成这样：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.contrib import admin
from .models import Question
admin.site.register(Question)</code></pre></blockquote>
<p>添加关联对象</p>
<p>好了，我们已经有自己的Question管理界面。 但是一个Question有多个Choices，管理界面中并没有将选项显示出来。</p>
<p>有两种方法来解决这个问题。 第一种是像我们为Question做的一样，在管理站点中注册Choice。这简单：</p>
<p>在polls/admin.py文件中</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.contrib import admin
from .models import Choice, Question</code></pre></blockquote>
<pre><code># ...
admin.site.register(Choice)</code></pre><p>但事实上，这是一种不高效的方式来添加Choice对象到系统中。在创建Question对象的同时可以直接添加一组Choice将会更好。让我们实现这个功能。</p>
<p>移除对Choice模型的register()调用。然后将Question的注册代码编辑为：</p>
<p>在polls/admin.py文件中</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.contrib import admin
from .models import Choice, Question
class ChoiceInline(admin.StackedInline):
        model = Choice
        extra = 3</code></pre><blockquote>
</blockquote>
<pre><code>class QuestionAdmin(admin.ModelAdmin):
        fieldsets = [
            (None,               {&apos;fields&apos;: [&apos;question_text&apos;]}),
            (&apos;Date information&apos;, {&apos;fields&apos;: [&apos;pub_date&apos;], &apos;classes&apos;: [&apos;collapse&apos;]}),
        ]
        inlines = [ChoiceInline]
admin.site.register(Question, QuestionAdmin)</code></pre></blockquote>
<h1 id="六、编写你的第一个视图"><a href="#六、编写你的第一个视图" class="headerlink" title="六、编写你的第一个视图"></a>六、编写你的第一个视图</h1><p>让我们来编写第一个视图。 打开polls/views.py文件并将以下Python代码写入：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.http import HttpResponse</code></pre><blockquote>
</blockquote>
<pre><code>def index(request):
        return HttpResponse(&quot;Hello, world. You&apos;re at the polls index.&quot;)</code></pre></blockquote>
<p>为了能够调用这个视图，我们需要将这个视图映射到URL上 —— 利用一个URLconf。<br>为了在投票应用目录内部创建URLconf，需要创建一个urls.py文件。你的应用的目录现在看起来应该像这样：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>polls/
        __init__.py
        admin.py
        models.py
        tests.py
           urls.py
        views.py</code></pre></blockquote>
<p>在polls/urls.py文件中键入如下代码：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.conf.urls import url</code></pre><blockquote>
</blockquote>
<pre><code>from . import views</code></pre><blockquote>
</blockquote>
<pre><code>urlpatterns = [
    url(r&apos;^$&apos;, views.index, name=&apos;index&apos;),
]</code></pre></blockquote>
<p>下一步，让主URLconf可以链接到polls.urls模块。在mysite/urls.py中插入一个include()：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.conf.urls import include, url
from django.contrib import admin</code></pre><blockquote>
</blockquote>
<pre><code>urlpatterns = [
        url(r&apos;^polls/&apos;, include(&apos;polls.urls&apos;)),
        url(r&apos;^admin/&apos;, include(admin.site.urls)),
]</code></pre></blockquote>
<p>现在我们已经将一个index视图关联到URLconf中。在你的浏览器中浏览 <a href="http://localhost:8000/polls/" target="_blank" rel="noopener">http://localhost:8000/polls/</a> , 你会看到 “Hello, world. You’re at the polls index.”, 正如你在index 视图中定义的那样.<br>备注：编写更多的视图<br>现在让我们给polls/views.py添加一些更多的视图。这些视图和之前的略有不同，因为它们另带了一个参数：<br>def detail(request, question_id):<br>        return HttpResponse(“You’re looking at question %s.” % question_id)</p>
<p>def results(request, question_id):<br>        response = “You’re looking at the results of question %s.”<br>        return HttpResponse(response % question_id)</p>
<p>def vote(request, question_id):<br>        return HttpResponse(“You’re voting on question %s.” % question_id)<br>通过下面的url() 调用将这些新的视图和polls.urls模块关联起来：<br>from django.conf.urls import url</p>
<p>from . import views</p>
<p>urlpatterns = [<br>    # ex: /polls/<br>    url(r’^$’, views.index, name=’index’),<br>    # ex: /polls/5/<br>    url(r’^(?P<question_id>[0-9]+)/$’, views.detail, name=’detail’),<br>    # ex: /polls/5/results/<br>    url(r’^(?P<question_id>[0-9]+)/results/$’, views.results, name=’results’),<br>    # ex: /polls/5/vote/<br>    url(r’^(?P<question_id>[0-9]+)/vote/$’, views.vote, name=’vote’),</question_id></question_id></question_id></p>
<p>]<br>备注：编写拥有实际功能的视图<br>1、快捷方式：render()<br>常见的习惯是载入一个模板、填充一个context 然后返回一个含有模板渲染结果的HttpResponse对象。Django为此提供一个快捷方式。<br>在polls/views.py文件中<br>from django.shortcuts import render<br>from .models import Question</p>
<p>def index(request):<br>        latest_question_list = Question.objects.order_by(‘-pub_date’)[:5]<br>        context = {‘latest_question_list’: latest_question_list}<br>        return render(request, ‘polls/index.html’, context)<br>将以下的代码放入模板文件：在polls/templates/polls/index.html文件中</p>

    	<p>No polls are available.</p>

<p>2、快捷方式：get_object_or_404()<br>一种常见的习惯是使用get()并在对象不存在时引发Http404。Django为此提供一个快捷方式。<br>在polls/views.py文件中：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>from django.shortcuts import get_object_or_404, render</code></pre><blockquote>
</blockquote>
<pre><code>from .models import Question</code></pre></blockquote>
<pre><code># ...
def detail(request, question_id):
    question = get_object_or_404(Question, pk=question_id)
    return render(request, &apos;polls/detail.html&apos;, {&apos;question&apos;: question})
在polls/templates/polls/detail.html文件中：
&lt;h1&gt;{{ question.question_text }}&lt;/h1&gt;
&lt;ul&gt;
{% for choice in question.choice_set.all %}
        <li>{{ choice.choice_text }}</li>
    {% endfor %}
&lt;/ul&gt;</code></pre><h1 id="七、移除模板中硬编码的URLs"><a href="#七、移除模板中硬编码的URLs" class="headerlink" title="七、移除模板中硬编码的URLs"></a>七、移除模板中硬编码的URLs</h1><p>还记得吗，当我们在polls/index.html模板中编写一个指向Question的链接时，链接中一部分是硬编码的：</p>
<pre><code>&lt;li&gt;&lt;a href=&quot;/polls/{{ question.id }}/&quot;&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;
这种硬编码、紧耦合的方法有一个问题，就是如果我们想在拥有许多模板文件的项目中修改URLs，那将会变得很有挑战性。 然而，因为你在polls.urls模块的url()函数中定义了name 参数，你可以通过使用{% url %}模板标签来移除对你的URL配置中定义的特定的URL的依赖：
&lt;li&gt;&lt;a href=&quot;{% url 'detail' question.id %}&quot;&gt;{{ question.question_text }}&lt;/a&gt;&lt;/li&gt;</code></pre><p>它的工作原理是在polls.urls模块里查找指定的URL的定义。你可以看到名为‘detail’的URL的准确定义：</p>
<blockquote>
<blockquote>
</blockquote>
<pre><code>...</code></pre></blockquote>
<pre><code># the &apos;name&apos; value as called by the {% url %} template tag
url(r&apos;^(?P&lt;question_id&gt;[0-9]+)/$&apos;, views.detail, name=&apos;detail&apos;),
...
如果你想把polls应用中detail视图的URL改成其它样子比如 polls/specifics/12/，就可以不必在该模板（或者多个模板）中修改它，只需要修改 polls/urls.py：
...
# added the word &apos;specifics&apos;
url(r&apos;^specifics/(?P&lt;question_id&gt;[0-9]+)/$&apos;, views.detail, name=&apos;detail&apos;),
...</code></pre><blockquote>
</blockquote>

        
      </div>
      
      
      
    </div>
    
    
    
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/WechatIMG67.jpeg" alt="issac">
            
              <p class="site-author-name" itemprop="name">issac</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/issac2015" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#示例："><span class="nav-number">1.</span> <span class="nav-text">示例：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一、创建一个项目："><span class="nav-number">2.</span> <span class="nav-text">一、创建一个项目：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、开发服务器"><span class="nav-number">3.</span> <span class="nav-text">二、开发服务器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、创建模型"><span class="nav-number">4.</span> <span class="nav-text">三、创建模型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、玩转API"><span class="nav-number">5.</span> <span class="nav-text">四、玩转API</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#五、创建一个管理员用户"><span class="nav-number">6.</span> <span class="nav-text">五、创建一个管理员用户</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#六、编写你的第一个视图"><span class="nav-number">7.</span> <span class="nav-text">六、编写你的第一个视图</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#七、移除模板中硬编码的URLs"><span class="nav-number">8.</span> <span class="nav-text">七、移除模板中硬编码的URLs</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">



Copyright
<span style="position: relative;top: 1px;">&copy; </span>

<span itemprop="copyrightYear">2019 issac 保留所有权利。</span>

  <span class="author" itemprop="copyrightHolder">
    <a href="http://www.beian.miit.gov.cn" target="_blank">粤ICP备19105205号-1</a>
  </span>

  
</div>





        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
